# Quote Calculator v3.0 - Production Environment Variables
# ============================================================================
# ВАЖНО: Этот файл используется ТОЛЬКО для production контейнера на VPS
# ============================================================================

# ============================================================================
# Server Configuration
# ============================================================================

# Server port (внутренний порт контейнера)
PORT=4000

# Node environment
NODE_ENV=production

# Application environment
APP_ENV=production

# ============================================================================
# Storage Configuration
# ============================================================================

# Storage type: 'sqlite' (рекомендуется для production)
STORAGE_TYPE=sqlite

# Database path (внутри контейнера)
DB_PATH=/app/db/quotes.db

# Dual-write mode (отключен для production)
DUAL_WRITE_MODE=false

# ============================================================================
# Data Integrity & Safety
# ============================================================================

# Enable audit logging
ENABLE_AUDIT_LOG=true

# Enable optimistic locking (защита от concurrent edits)
ENABLE_OPTIMISTIC_LOCKING=true

# ============================================================================
# Performance
# ============================================================================

# JSON payload size limit
JSON_LIMIT=50mb

# Request timeout (30 seconds)
REQUEST_TIMEOUT=30000

# ============================================================================
# Logging (Winston)
# ============================================================================

# Log level: error, warn, info
LOG_LEVEL=info

# Console logging (ОТКЛЮЧЕНО для production - только file logs)
LOG_CONSOLE=false

# Log directory (внутри контейнера)
LOG_DIR=/app/logs

# SQL query logging (ОТКЛЮЧЕНО для production)
LOG_SQL_QUERIES=false

# ============================================================================
# Security
# ============================================================================

# CORS origins (укажите ваш домен)
# Например: CORS_ORIGIN=https://quotes.yourdomain.com
CORS_ORIGIN=*

# Допустимые HTTP методы
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS

# ============================================================================
# Backup Configuration
# ============================================================================

# Автоматические бэкапы управляются через cron на хосте
# См. scripts/backup-production.sh

# ============================================================================
# Health Check Configuration
# ============================================================================

# Health check endpoint: /health
# Интервал проверки: 30s (настроено в docker-compose.vps.yml)

# ============================================================================
# Production Notes
# ============================================================================
#
# 1. Безопасность:
#    - Никогда не коммитьте этот файл с реальными секретами в Git
#    - Используйте .gitignore для исключения .env.production
#    - На VPS храните в /opt/quote-calculator/.env.production
#
# 2. Мониторинг:
#    - Логи доступны через: docker-compose logs -f quote-production
#    - Health check: curl http://localhost:4000/health
#    - Через Portainer: https://your-vps-ip:9443
#
# 3. Бэкапы:
#    - Автоматические через cron (scripts/backup-production.sh)
#    - Ручной бэкап: npm run db:export:production
#    - Хранятся в /opt/backups на VPS
#
# 4. Обновления:
#    - Деплой через scripts/deploy-production.sh
#    - Откат через scripts/rollback.sh
#    - Zero-downtime deployment с health checks
#
# ============================================================================
