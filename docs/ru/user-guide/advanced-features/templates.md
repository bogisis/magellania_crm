# Шаблоны и пакеты

**Версия:** 2.3.0

## Введение

Шаблоны и пакеты - готовые наборы услуг для быстрого создания типовых смет. Создайте раз, используйте многократно.

---

## Типы шаблонов

### 1. Шаблоны услуг

**Определение:** Отдельная услуга в каталоге

```javascript
{
  id: "svc_001",
  name: "Трансфер аэропорт-отель",
  price: 25,
  quantity: 1,
  markup: 10,
  category: "transport"
}
```

**Использование:** Добавление в смету через каталог (Ctrl+K)

### 2. Пакеты услуг

**Определение:** Группа услуг для типового тура

```javascript
{
  id: "pkg_bali_7d",
  name: "Бали 7 дней стандарт",
  services: [
    "svc_transfer_arrive",
    "svc_hotel_6nights",
    "svc_tour_ubud",
    "svc_transfer_depart"
  ],
  pax: 10,
  markup: 12
}
```

**Использование:** Одним кликом все услуги в смету

### 3. Шаблоны смет

**Определение:** Полная смета со всеми данными

```javascript
{
  client: { name: "[Клиент]", ... },
  group: { pax: 10, ... },
  services: [...],
  pricing: { hiddenMarkup: 5 }
}
```

**Использование:** Дублирование существующей сметы (Ctrl+D)

---

## Создание пакета услуг

### Процесс

```
1. Открыть каталог
   Ctrl+K → Выбрать каталог

2. Выбрать услуги для пакета
   Checkbox у каждой услуги
   Или: Фильтр + Ctrl+A

3. Сохранить как пакет
   Кнопка "Сохранить как пакет"

4. Заполнить форму:
   Название: "Бали 7 дней стандарт"
   Описание: "Стандартный тур на Бали"
   PAX по умолчанию: 10
   Наценка по умолчанию: 12%
   Категория: "Готовые туры"

5. Создать
   Пакет сохранён в каталоге
```

### Примеры пакетов

**Бали 7 дней:**
```
Услуги (6):
- Трансфер аэропорт-отель
- Отель 4* (DBL, 6 ночей)
- Экскурсия Убуд
- Экскурсия храмы
- Гид (3 дня)
- Трансфер отель-аэропорт

PAX: 10
Markup: 12%
```

**Корпоратив Тбилиси:**
```
Услуги (8):
- Встреча в аэропорту
- Трансфер (автобус 25 мест)
- Отель конференц-зал
- Проживание (2 ночи, SGL × 20)
- Кофе-брейки (3 дня)
- Обед (3 дня)
- Ужин (2 дня)
- Экскурсия винодельня

PAX: 20
Markup: 10%
```

---

## Использование пакетов

### В новой смете

```
1. Создать смету
   Ctrl+N

2. Заполнить данные клиента
   Имя, контакты

3. Открыть каталог
   Ctrl+K

4. Вкладка "Пакеты"
   Список всех готовых пакетов

5. Выбрать пакет
   Клик на "Бали 7 дней стандарт"

6. Просмотр состава
   Показывается список услуг

7. Добавить
   Кнопка "Добавить в смету"

8. Результат
   Все услуги пакета в смете
   PAX применён
   Наценки установлены
```

**Время:** 30 секунд вместо 10 минут ручного добавления

### Корректировка после добавления

```
Пакет добавлен → Услуги в смете
Можно изменять:
  - Количество услуг
  - Цены
  - Наценки
  - Удалять ненужные
  - Добавлять дополнительные
```

**Пример:**
```
Базовый пакет "Бали 7 дней"
+ Доп. экскурсия (по запросу клиента)
+ Страховка (забыли в пакете)
- Гид (клиент не нужен)
= Кастомизированное предложение
```

---

## Управление пакетами

### Список пакетов

```
Каталог → Вкладка "Пакеты"

┌─────────────────────────────────────┐
│ Пакет                    Услуг  PAX │
├─────────────────────────────────────┤
│ Бали 7 дней стандарт       6    10  │
│ Бали 7 дней премиум        8    10  │
│ Корпоратив Тбилиси         8    20  │
│ Сочи выходные              4     2  │
└─────────────────────────────────────┘
```

### Редактирование пакета

```
1. Клик на пакет
2. Кнопка "Редактировать"
3. Изменить состав:
   - Добавить услуги
   - Удалить услуги
   - Изменить порядок
4. Изменить параметры:
   - PAX
   - Markup
   - Название, описание
5. Сохранить
```

### Дублирование пакета

```
Пакет "Бали 7 дней стандарт" →
Дублировать →
Новое имя: "Бали 7 дней премиум"

Изменить:
  - Отель 4* → Отель 5*
  - Добавить: VIP трансфер
  - Добавить: Ужины (3 раза)
  - Markup: 12% → 15%

Сохранить →
Два пакета: стандарт и премиум
```

---

## Шаблоны смет

### Создание из существующей

```
1. Открыть готовую смету
2. Меню → "Сохранить как шаблон"
3. Название: "Шаблон Бали группа 10 чел"
4. Очистить персональные данные:
   Имя клиента → "[Имя клиента]"
   Телефон → ""
   Email → ""
5. Сохранить
```

### Использование шаблона

```
1. Новая смета
2. Меню → "Из шаблона"
3. Выбрать: "Шаблон Бали группа 10 чел"
4. Смета создана со всеми услугами
5. Заполнить данные клиента
6. Скорректировать если нужно
7. Сохранить
```

---

## Библиотека шаблонов

### Организация

**По направлениям:**
```
/Шаблоны
  /Бали
    - Бали 7 дней стандарт
    - Бали 7 дней премиум
    - Бали свадьба
  /Грузия
    - Тбилиси + Батуми 7 дней
    - Винный тур 5 дней
    - Корпоратив 3 дня
  /Россия
    - Сочи выходные
    - Алтай активный 10 дней
```

**По типу:**
```
/Пляжный отдых
/Активный туризм
/Корпоративные
/Свадебные
/VIP туры
```

### Именование

**✅ Хорошо:**
```
"Бали 7 дней стандарт (10 pax, отель 4*)"
"Корпоратив Тбилиси 3 дня (20-25 чел)"
"Свадьба Бали (церемония + 7 дней)"
```

**❌ Плохо:**
```
"Пакет 1"
"Новый шаблон"
"Копия шаблона"
```

---

## Версионирование шаблонов

### Зачем нужно

**Проблема:**
```
Изменили пакет "Бали 7 дней"
Старые сметы созданы со старым составом
Новые сметы используют новый состав
Несоответствие
```

**Решение:**
```
"Бали 7 дней v1.0" (2024)
"Бали 7 дней v2.0" (2025)

Или по сезонам:
"Бали 7 дней зима 2024-2025"
"Бали 7 дней лето 2025"
```

### Создание версий

```
1. Дублировать пакет
2. Имя: "{original} v2.0"
3. Изменить состав/цены
4. Пометить старый как "Архив"
5. Новый сделать активным
```

---

## Экспорт/импорт шаблонов

### Экспорт пакета

```
Пакет → Меню → Экспорт
Файл: bali-7days-standard_package.json

Содержимое:
{
  "type": "package",
  "version": "1.2.0",
  "name": "Бали 7 дней стандарт",
  "services": [...],
  "defaults": {
    "pax": 10,
    "markup": 12
  }
}
```

### Импорт пакета

```
Каталог → Импорт → Пакет
Выбрать: bali-7days-standard_package.json
Валидация → OK
Импорт → Пакет доступен
```

### Обмен с коллегами

```
Создали удачный пакет →
Экспорт в JSON →
Отправить коллеге (email/Slack) →
Коллега импортирует →
Пакет доступен в его системе
```

---

## API для работы с пакетами

### Создание пакета

```bash
POST /api/catalogs/:id/packages
Content-Type: application/json

{
  "name": "Бали 7 дней стандарт",
  "serviceIds": [
    "svc_001",
    "svc_002",
    "svc_003"
  ],
  "defaults": {
    "pax": 10,
    "markup": 12
  }
}
```

### Получение пакетов

```bash
GET /api/catalogs/:id/packages

Response:
{
  "packages": [
    {
      "id": "pkg_001",
      "name": "...",
      "services": [...]
    }
  ]
}
```

---

## Лучшие практики

**Создание пакетов:**
- Группируйте логически связанные услуги
- Указывайте типичный PAX
- Документируйте назначение в описании
- Версионируйте при изменениях

**Использование:**
- Не бойтесь менять после добавления
- Пакет - отправная точка, не догма
- Кастомизируйте под клиента

**Организация:**
- Структурируйте по направлениям или типам
- Архивируйте устаревшие
- Регулярно обновляйте цены

---

**Назад:** [← Массовые операции](bulk-operations.md)
**Далее:** [Backup & Restore →](backup-restore.md)
