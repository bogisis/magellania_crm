# Интерфейс приложения

**Версия:** 2.3.0
**Дата обновления:** 6 ноября 2025

## Обзор

Quote Calculator имеет чистый и интуитивный интерфейс, разделённый на несколько функциональных зон. Это руководство поможет вам освоить все элементы управления.

---

## Общая структура интерфейса

```
┌──────────────────────────────────────────────────────────────┐
│                  ЗАГОЛОВОК И МЕНЮ                            │
│  Quote Calculator v2.3.0        [Сохранить] [Загрузить] ... │
├──────────────────────────────────────────────────────────────┤
│                  ИНФОРМАЦИЯ О КЛИЕНТЕ                        │
│  Имя: ________________  Телефон: ______________             │
│  Email: ______________  Примечания: ___________             │
├──────────────────────────────────────────────────────────────┤
│                  ПАРАМЕТРЫ ГРУППЫ                            │
│  PAX: [10]  Даты: [15.12.2025 - 22.12.2025]                │
│  Длительность: 7 дней / 6 ночей                              │
├──────────────────────────────────────────────────────────────┤
│                  СПИСОК УСЛУГ                                │
│  ┌────────────────────────────────────────────────────────┐  │
│  │ 1. Трансфер аэропорт→отель  $100 × 1  Наценка: 10%   │  │
│  │ 2. Отель 4* (DBL)           $480 × 5  Наценка: 10%   │  │
│  │ 3. Экскурсии                $350 × 1  Наценка: 15%   │  │
│  │                                                        │  │
│  │ [+ Добавить услугу]  [Открыть каталог]                │  │
│  └────────────────────────────────────────────────────────┘  │
├──────────────────────────────────────────────────────────────┤
│                  РАСЧЁТЫ И НАЦЕНКИ                           │
│  Скрытая наценка: [5%]   НДС: [0%]                          │
│                                                              │
│  Базовая стоимость:  $5,800                                  │
│  С наценками:        $6,370                                  │
│  Прибыль:            $860 (14.8%)                            │
├──────────────────────────────────────────────────────────────┤
│                  FOOTER                                      │
│  Последнее изменение: 06.11.2025 07:30  Автосохранение: ✓   │
└──────────────────────────────────────────────────────────────┘
```

---

## 1. Заголовок и панель управления

### Основные кнопки

#### Сохранить (💾 Ctrl+S)
```
Назначение: Сохранить текущую смету на сервер
Действие:
  - Валидация данных
  - Сохранение в базу данных
  - Создание автоматического backup
Результат: "✅ Смета сохранена: filename.json"
```

#### Загрузить (📂 Ctrl+O)
```
Назначение: Загрузить существующую смету
Действие:
  1. Открывается список всех смет
  2. Можно искать по имени клиента, email, дате
  3. Выбор сметы → Загрузка
  4. Все данные восстанавливаются
```

#### Печать (🖨️ Ctrl+P)
```
Назначение: Распечатать смету или сохранить в PDF
Действие:
  - Открывается диалог печати браузера
  - Скрываются внутренние расчёты
  - Форматирование для клиента
```

#### Каталог (📚 Ctrl+K)
```
Назначение: Открыть каталог шаблонов услуг
Действие:
  1. Показывает список всех услуг
  2. Категории (трансферы, отели, экскурсии)
  3. Поиск по названию
  4. Добавление услуги в смету одним кликом
```

#### Экспорт (📤)
```
Назначение: Экспортировать данные
Варианты:
  - JSON файл (смета)
  - Полный экспорт всех данных
  - Экспорт базы данных (SQLite)
```

#### Импорт (📥)
```
Назначение: Импортировать данные
Поддерживаемые форматы:
  - JSON (смета)
  - JSON (каталог)
  - CSV (legacy)
```

---

## 2. Информация о клиенте

### Поля формы

#### Имя клиента
```
Тип: Текстовое поле
Обязательное: Да
Формат: Любой текст
Пример: "Иванов Петр Сергеевич"
Используется:
  - Идентификация сметы
  - Именование файлов
  - Печать КП
```

#### Телефон
```
Тип: Текстовое поле
Обязательное: Да
Формат: Любой (с автоформатированием)
Пример: "+7 (999) 123-45-67"
Валидация: Базовая проверка формата
```

#### Email
```
Тип: Email поле
Обязательное: Да
Формат: standard email format
Пример: "ivanov@example.com"
Валидация: RFC 5322 email validation
Используется:
  - Уникальный идентификатор
  - Именование файлов
```

#### Примечания
```
Тип: Многострочное текстовое поле
Обязательное: Нет
Формат: Любой текст
Пример: "VIP клиент, требует особого внимания"
Отображение: Только в интерфейсе, не в печати
```

---

## 3. Параметры группы

### PAX (Количество человек)

```
Тип: Числовое поле
Диапазон: 1 - 999
По умолчанию: 1
Пример: 10

Влияние на расчёты:
- Трансферы: цена × кол-во
- Отели: цена × (PAX ÷ 2) для DBL
- Групповые услуги: фиксированная цена
- Индивидуальные услуги: цена × PAX
```

**Быстрое изменение:**
```
Клик на поле → Ввод числа → Enter
Или использовать кнопки [+] / [-]
```

### Даты

#### Дата начала
```
Тип: Date picker
Формат: DD.MM.YYYY
Пример: 15.12.2025
Валидация: Не может быть в прошлом (опционально)
```

#### Дата окончания
```
Тип: Date picker
Формат: DD.MM.YYYY
Пример: 22.12.2025
Валидация: Должна быть после даты начала
```

#### Длительность (автоматически)
```
Расчёт: Дата окончания - Дата начала
Формат: X дней / Y ночей
Пример: 7 дней / 6 ночей
Использование: Для расчёта размещения
```

---

## 4. Список услуг

### Структура строки услуги

```
┌──────────────────────────────────────────────────────────┐
│ [№] [Название услуги]  [$Цена] × [Кол-во]  [Наценка%]   │
│     [Категория] [Описание]                      [Удалить]│
└──────────────────────────────────────────────────────────┘
```

### Поля услуги

#### Название
```
Тип: Текстовое поле
Редактируемое: Да
Макс. длина: 100 символов
Пример: "Трансфер аэропорт → отель"
```

#### Цена
```
Тип: Числовое поле (decimal)
Формат: $X,XXX.XX
Диапазон: 0.01 - 999,999
Пример: $100.00
Валидация: Должна быть положительной
```

#### Количество
```
Тип: Числовое поле (integer)
Диапазон: 1 - 999
По умолчанию: 1
Пример: 5 (для 5 ночей в отеле)
```

#### Наценка
```
Тип: Числовое поле (процент)
Диапазон: 0 - 999%
По умолчанию: 0%
Пример: 10% → $100 становится $110
```

#### Итого
```
Тип: Только чтение (вычисляемое)
Формат: $X,XXX.XX
Расчёт: (Цена × Количество) × (1 + Наценка/100)
Пример: ($100 × 1) × 1.10 = $110
```

### Действия с услугой

#### Редактирование
```
Способ 1: Клик на поле → Изменить → Enter
Способ 2: Double-click → Изменить → Enter
Способ 3: Выбрать услугу → Edit (горячая клавиша)
```

#### Удаление
```
Способ 1: Навести на услугу → Кнопка "Удалить" (🗑️)
Способ 2: Выбрать услугу → Delete key
Способ 3: Правый клик → Удалить
```

#### Перемещение
```
Drag & Drop: Захватить услугу → Перетащить на новое место
Или: Кнопки [↑] [↓] для перемещения вверх/вниз
```

#### Копирование
```
Правый клик → Дублировать
Или: Ctrl+D на выбранной услуге
```

---

## 5. Добавление услуг

### Способ 1: Из каталога

```
1. Нажать "Открыть каталог" (Ctrl+K)
2. Найти нужную услугу:
   - Прокрутка списка
   - Поиск по названию
   - Фильтр по категории
3. Клик на услугу
4. Услуга добавляется в смету с базовой ценой
5. Можно скорректировать цену и наценку
```

**Каталог:** Модальное окно с поиском и категориями

```
┌────────────────────────────────────────────┐
│  Каталог услуг                     [×]     │
├────────────────────────────────────────────┤
│  🔍 Поиск: [___________]                   │
├────────────────────────────────────────────┤
│  Категории:                                │
│   [Все] [🚗 Трансферы] [🏨 Отели]         │
│   [🎯 Экскурсии] [👨‍🏫 Гиды] [🍽️ Питание]   │
├────────────────────────────────────────────┤
│  📋 Результаты (25):                       │
│  ┌──────────────────────────────────────┐  │
│  │ Трансфер аэропорт→отель    $100     │  │
│  │ Отель 4* (DBL номер)       $80/ночь │  │
│  │ Экскурсия обзорная         $350     │  │
│  │ ...                                 │  │
│  └──────────────────────────────────────┘  │
└────────────────────────────────────────────┘
```

### Способ 2: Вручную

```
1. Нажать кнопку "+ Добавить услугу"
2. Заполнить форму:
   ┌────────────────────────────────────┐
   │  Добавить услугу           [×]     │
   ├────────────────────────────────────┤
   │  Название: [__________________]    │
   │  Категория: [▼ Выбрать]           │
   │  Цена: [$_______]                  │
   │  Количество: [___]                 │
   │  Наценка: [___]%                   │
   │  Описание: [__________________]    │
   │                                    │
   │  [Отмена]  [Добавить]              │
   └────────────────────────────────────┘
3. Нажать "Добавить"
4. Услуга появится в списке
```

---

## 6. Расчёты и наценки

### Скрытая наценка

```
┌────────────────────────────────────┐
│  Скрытая наценка: [5] %            │
│  💡 Не показывается клиенту        │
└────────────────────────────────────┘

Назначение:
- Общая маржа на весь тур
- Рассчитывается от БАЗОВОЙ стоимости
- Учитывается в прибыли, но не в цене клиенту

Пример:
  Базовая стоимость: $1,000
  Скрытая наценка 5%: $50

  → Клиенту: $1,000 + индивидуальные наценки
  → Ваша прибыль: индивидуальные + $50
```

### НДС

```
┌────────────────────────────────────┐
│  НДС: [0] %                        │
└────────────────────────────────────┘

Назначение:
- Налог на добавленную стоимость
- Рассчитывается от суммы БЕЗ скрытой наценки
- Добавляется к итоговой цене для клиента

Пример:
  Сумма с наценками: $1,100
  НДС 20%: $220

  → Клиенту: $1,320
```

### Панель расчётов

```
┌────────────────────────────────────────┐
│  РАСЧЁТЫ                               │
├────────────────────────────────────────┤
│  Базовая стоимость:      $5,800        │
│  (сумма всех услуг без наценок)        │
│                                        │
│  С индивид. наценками:   $6,370        │
│  (каждая услуга × наценка)             │
│                                        │
│  + НДС (0%):             $0            │
│                                        │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │
│  ИТОГО КЛИЕНТУ:          $6,370        │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │
│                                        │
│  ВАША ПРИБЫЛЬ:           $860          │
│  (индив. + скрытая наценка)            │
│                                        │
│  МАРЖА:                  14.8%         │
│  (прибыль / базовая × 100%)            │
└────────────────────────────────────────┘
```

---

## 7. Bulk операции

### Выбор нескольких услуг

```
Способ 1: Checkbox
  Чекбокс слева от каждой услуги

Способ 2: Ctrl+Click
  Удерживайте Ctrl и кликайте на услуги

Способ 3: Shift+Click
  Выберите первую → Shift+Click на последней
  (выберутся все между ними)

Способ 4: Выбрать все
  Ctrl+A или кнопка "Выбрать все"
```

### Массовые действия

```
┌────────────────────────────────────────┐
│  Выбрано: 5 услуг                      │
│                                        │
│  [Изменить наценку]                    │
│  [Изменить категорию]                  │
│  [Удалить выбранные]                   │
│  [Экспортировать]                      │
│  [Снять выделение]                     │
└────────────────────────────────────────┘
```

**Пример: Изменить наценку для всех отелей**
```
1. Отфильтровать услуги по категории "Отели"
2. Выбрать все (Ctrl+A)
3. Нажать "Изменить наценку"
4. Ввести новую наценку (например, 12%)
5. Подтвердить
6. Все отели теперь с наценкой 12%
```

---

## 8. Поиск и фильтры

### Глобальный поиск (Ctrl+F)

```
┌────────────────────────────────────────┐
│  🔍 Поиск: [_трансфер_]               │
├────────────────────────────────────────┤
│  Результаты:                           │
│  ✓ В текущей смете (2 услуги)         │
│  ✓ В каталоге (5 шаблонов)            │
│  ✓ В сохранённых сметах (12)          │
└────────────────────────────────────────┘
```

### Фильтры услуг

```
Фильтр по категории:
  [Все] [Трансферы] [Отели] [Экскурсии] [Гиды]

Сортировка:
  [По названию] [По цене] [По дате добавления]

Показать:
  ☑ Услуги с наценкой
  ☐ Только custom услуги
  ☐ Услуги без категории
```

---

## 9. Статусная строка (Footer)

```
┌────────────────────────────────────────────────────┐
│  Последнее изменение: 06.11.2025 07:30             │
│  Автосохранение: ✓  Сервер: 🟢  Услуг: 8  PAX: 10 │
└────────────────────────────────────────────────────┘
```

**Индикаторы:**
- ✓ Автосохранение - сохранено в localStorage
- 🟢 Сервер - подключение к серверу активно
- 🔴 Сервер - нет подключения
- Услуг: X - количество услуг в текущей смете
- PAX: X - текущее количество человек

---

## 10. Горячие клавиши

### Основные

| Действие | Windows/Linux | macOS |
|---|---|---|
| Сохранить | Ctrl+S | Cmd+S |
| Загрузить | Ctrl+O | Cmd+O |
| Печать | Ctrl+P | Cmd+P |
| Каталог | Ctrl+K | Cmd+K |
| Поиск | Ctrl+F | Cmd+F |
| Новая смета | Ctrl+N | Cmd+N |

### Редактирование

| Действие | Клавиша |
|---|---|
| Удалить услугу | Delete |
| Дублировать | Ctrl+D |
| Выбрать все | Ctrl+A |
| Отменить | Ctrl+Z |
| Повторить | Ctrl+Y |

### Навигация

| Действие | Клавиша |
|---|---|
| Следующая услуга | ↓ / Tab |
| Предыдущая услуга | ↑ / Shift+Tab |
| Переместить вверх | Ctrl+↑ |
| Переместить вниз | Ctrl+↓ |
| Закрыть диалог | Escape |

---

## 11. Адаптивность

### Desktop (1920×1080+)
- Полная функциональность
- Все элементы видны
- Комфортная работа

### Laptop (1366×768)
- Компактный режим
- Свернутые секции
- Скроллинг списков

### Tablet (768×1024)
- Упрощённый интерфейс
- Touch-friendly кнопки (44px)
- Вертикальная прокрутка

### Mobile (375×667)
- ⚠️ Ограниченная поддержка
- Только просмотр смет
- Рекомендуется desktop для работы

---

## 12. Темы оформления

### Светлая тема (по умолчанию)

```
Цвета:
  Фон: #FFFFFF
  Текст: #1A202C
  Акцент: #3B82F6
  Границы: #E2E8F0
```

### Тёмная тема (в разработке)

```
Цвета:
  Фон: #1A202C
  Текст: #F7FAFC
  Акцент: #60A5FA
  Границы: #2D3748
```

Переключение: `Settings → Тема → [Светлая / Тёмная]`

---

## Что дальше?

Теперь вы знаете все элементы интерфейса! Изучите расширенные функции:

1. 📚 **[Работа со сметами](../working-with-estimates/index.md)** - создание, редактирование, расчёты
2. 🗂️ **[Управление каталогами](../catalogs/index.md)** - шаблоны и категории
3. ⚡ **[Bulk операции](../advanced-features/bulk-operations.md)** - массовое редактирование
4. ⌨️ **[Горячие клавиши](../tips-and-tricks/keyboard-shortcuts.md)** - полный список

---

**Предыдущий шаг:** [← Начало работы](index.md)
**Следующий шаг:** [Работа со сметами →](../working-with-estimates/index.md)
